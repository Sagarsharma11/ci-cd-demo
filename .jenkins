stage('Build and Push Docker Image') {
    steps {
        script {
            docker.withRegistry('https://index.docker.io/v1/', 'dockerhub-credentials-id') {
                def app = docker.build("<your-dockerhub-username>/<image-name>:<tag>")
                app.push()
            }
        }
    }
}